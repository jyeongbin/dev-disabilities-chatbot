<!DOCTYPE html>
<html>
<head>
    <title>ì¹´ë“œ ë§¤ì¹˜ ê²Œì„</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            background-color: rgba(254,252,239);
            position: relative;
        }
        h1{
            text-align: center;
        }
        #game-instruction {
            position: absolute;
            top: 100px;
        }
        #intro, #game-board, #end-game {
            display: flex;
            flex-wrap: wrap;
            width: 320px;
            height: 320px;
            margin: auto;
            justify-content: center;
            align-items: center;
        }
        .card {
            width: 80px;
            height: 80px;
            margin: 5px;
            background-color: #4caf50;
            text-align: center;
            line-height: 80px;
            color: white;
            border-radius: 5px;
            cursor: pointer;
            font-size: 2em;
        }
        .matched {
            background-color: #f44336 !important;
            pointer-events: none;
        }
        #end-game {
            flex-direction: column;
        }
        #end-game button {
            margin: 5px;
        }
    </style>
</head>
<body>
    <div id="intro">
        <h1>í™”ë©´ì˜ ì¹´ë“œ ë‘ ê°œë¥¼ ê³¨ë¼ ê°™ì€ ì§ì„ ë§ì¶”ëŠ” ê²Œì„ì´ì•¼!</h1>
        <button onclick="startGame()" style="font-size: 1.5em;">ì•Œê² ìŠµë‹ˆë‹¤!</button>
    </div>
    <h1 id="game-instruction" style="display: none;">ì¹´ë“œ ë‘ ê°œë¥¼ ë§ì¶°ë´</h1>
    <div id="game-board" style="display: none;"></div>
    <div id="end-game" style="display: none;">
        <h1>ê²Œì„ ì¢…ë£Œ</h1>
        <button onclick="restartGame()" class="end-game-button">ë‹¤ì‹œí•˜ê¸°</button>
        <button id="CancelButton" class="end-game-button">ì¢…ë£Œ</button>
    </div>
    <script>
        const cards = ['ğŸ', 'ğŸ', 'ğŸŒ', 'ğŸŒ', 'ğŸ“', 'ğŸ“', 'ğŸ‡', 'ğŸ‡'];
        const gameBoard = document.getElementById('game-board');
        let hasFlippedCard = false;
        let firstCard, secondCard;
        let lockBoard = false;
        // ê²Œì„íŒì— ì¹´ë“œ ë°°ì¹˜
        cards.sort(() => 0.5 - Math.random());
        cards.forEach(card => {
            const cardElement = document.createElement('div');
            cardElement.classList.add('card');
            cardElement.dataset.card = card;
            cardElement.addEventListener('click', flipCard);
            gameBoard.appendChild(cardElement);
        });

        function startGame() {
            document.getElementById('intro').style.display = 'none';
            document.getElementById('game-board').style.display = 'flex';
            document.getElementById('game-instruction').style.display = 'block';
        }
        function flipCard() {
            if (lockBoard) return;
            this.innerText = this.dataset.card;
            if (!hasFlippedCard) {
                // ì²« ë²ˆì§¸ ì¹´ë“œë¥¼ ë’¤ì§‘ìŒ
                hasFlippedCard = true;
                firstCard = this;
            } else {
                // ë‘ ë²ˆì§¸ ì¹´ë“œë¥¼ ë’¤ì§‘ìŒ
                hasFlippedCard = false;
                secondCard = this;
                
                // ì¹´ë“œ ìŒ ì²´í¬
                if (firstCard.dataset.card === secondCard.dataset.card) {
                    // ë§¤ì¹˜ ì„±ê³µ
                    firstCard.removeEventListener('click', flipCard);
                    secondCard.removeEventListener('click', flipCard);
                    firstCard.classList.add('matched');
                    secondCard.classList.add('matched');
        
                    // ëª¨ë“  ì¹´ë“œê°€ ë§¤ì¹˜ë˜ì—ˆëŠ”ì§€ í™•ì¸
                    checkGameOver();
                } else {
                    // ë§¤ì¹˜ ì‹¤íŒ¨
                    lockBoard = true;
                    setTimeout(() => {
                        firstCard.innerText = '';
                        secondCard.innerText = '';
                        lockBoard = false;
                    }, 1000);
                }
            }
        }

        function checkGameOver() {
            const matchedCards = document.querySelectorAll('.matched');
            if (matchedCards.length === cards.length) {
                document.getElementById('game-board').style.display = 'none';
                document.getElementById('game-instruction').style.display = 'none';
                document.getElementById('end-game').style.display = 'flex';
            }
        }
        
        function restartGame() {
            location.reload();
        }
        
        function endGame() {
            window.close();
        }

        // ì¢…ë£Œ ë²„íŠ¼ í´ë¦­ ì‹œ í˜ì´ì§€ ì´ë™
        CancelButton.addEventListener('click', () => {
            window.location.href = 'btn_chatbot';
        });


    </script>
</body>
</html>